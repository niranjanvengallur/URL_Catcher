!function(){function e(e){for(var t=[];null!=e.parentNode;){for(var n=0,o=0,r=0;r<e.parentNode.childNodes.length;r++){var i=e.parentNode.childNodes[r];i.nodeName==e.nodeName&&(i===e&&(o=n),n++)}t.unshift(""!=e.id?e.nodeName.toLowerCase()+"#"+e.id:n>1?e.nodeName.toLowerCase()+"["+o+"]":e.nodeName.toLowerCase()),e=e.parentNode}return t}function t(e,t){var n=document.getElementById(e);x(n,"change",function(){l({0:"icapture",1:t,2:document.getElementById(e).value})},!1)}function n(e){var t=new Image(1,1);t.src=e}function o(e){try{var t=f("_bs_fb_pushed");if(void 0!=t)return;request=b+"?x="+window._blueshiftid+"&k="+e;var n=c();n.open("GET",request,!0),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&i(JSON.parse(n.responseText))},n.send(request)}catch(o){}}function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e){return r(e)?!0:(window._fbq=window._fbq||[],window._fbq.push(["track","user_attributes",e]),void d("_bs_fb_pushed","1",1))}function a(e){try{xhr=c(),xhr.open("GET",e,!0),xhr.send(e)}catch(t){}}function c(){if(window.XMLHttpRequest)try{var e=new XMLHttpRequest}catch(t){var e=new window.ActiveXObject("Microsoft.XMLHTTP")}return e}function u(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(n){e=""}}return""===e&&(e=document.referrer),e}function d(e,t,n){var o=new Date;o.setDate(o.getDate()+n);var r=window.location.hostname,i=r.split(".");4==i.length&&i[0]>=0&&i[0]<=255&&i[1]>=0&&i[1]<=255&&i[2]>=0&&i[2]<=255&&i[3]>=0&&i[3]<=255||(r="."+r.replace(/^www./,""));var a=escape(t)+(null==n?"":";expires="+o.toUTCString())+";path=/;domain="+r;document.cookie=e+"="+a}function f(e){var t,n,o,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==e)return unescape(o)}function s(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function p(e){var r=e[0],i=u(),c=Math.floor(1e6*Math.random()+1),p=Math.round(new Date/1e3),l=f("_bs");if(void 0==l&&(l=s(),d("_bs",l,365)),"track"==r)r=e[1],e=e[2];else{if("capture"==r)return t(e[1],e[2]),!0;if("retarget"==r)return req=g+m+"?t="+p+"&e=appnexus&z="+c+"&x="+window._blueshiftid+"&k="+l+"&appnexus_id=$UID&u="+encodeURIComponent(encodeURIComponent(window.location.href))+"&r="+encodeURIComponent(encodeURIComponent(i)),n(req),!0;if("facebook"==r)return _=!0,!0;"icapture"==r?(r="capture",h=e[1],value=e[2],e={},e[h]=value):e=e[1]}req=m+"?t="+p+"&e="+r+"&r="+encodeURIComponent(i)+"&z="+c+"&x="+window._blueshiftid+"&k="+l+"&u="+encodeURIComponent(window.location.href);for(var h in e)v=e[h],req+="object"==typeof v?"&"+h+"_json="+encodeURIComponent(JSON.stringify(v)):"&"+h+"="+encodeURIComponent(v);return q?a(req):n(req),1==_&&"pageload"==r&&o(l),!0}function l(e){y?p(e):setTimeout(function(){l(e)},20)}function h(){y=!0}var w=("https:"===document.location.protocol?"https:":"http:")+"//api.getblueshift.com/",m=w+"unity.gif",b=w+"cookiejar.json",g=("https:"===document.location.protocol?"https:":"http:")+"//ib.adnxs.com/getuid?",y=!1,_=!1,q="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;if("object"==typeof blueshift){var k="undefined"==typeof blueshift.slice?[]:blueshift.slice(0);for(blueshift={events:[],load:function(){h()},capture:function(e,n){t(e,n)},retarget:function(){l(["retarget"])},facebook:function(){l(["facebook"])},track:function(e,t){l(["track",e,t])},pageload:function(e){l(["pageload",e])},identify:function(e){l(["identify",e])}},C=0;C<k.length;C++)blueshift.events.push(k[C])}if(document.addEventListener)var x=function(e,t,n){e.addEventListener(t,n,!1)};else var x=function(e,t,n){e.attachEvent("on"+t,n)};x(document,"click",function(t){t=t||window.event,element=t.target||t.srcElement,element.href&&l(["click",{p:e(element).toString(),c:element.href,a:element.innerHTML}])});for(var C=0;C<blueshift.events.length;C++)l(blueshift.events[C]);"complete"===document.readyState?h():window.addEventListener?window.addEventListener("load",h,!1):window.attachEvent?window.attachEvent("onload",h):h}();